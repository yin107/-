{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { basicRouter } from \"@/views/basic/basicRouter\";\nimport { iotRouter } from \"@/views/iot/iotRouter\";\nimport { oaRouter } from \"@/views/oa/oaRouter\";\nimport { mixins } from \"@/minxin\";\nexport default {\n  name: \"headeVue\",\n  mixins: [mixins],\n  props: [\"userInfo\", \"postInfo\"],\n  data() {\n    return {\n      Lists: [basicRouter, iotRouter, oaRouter],\n      drawer: false,\n      isFullScreen: false\n    };\n  },\n  mounted() {\n    this.inittag();\n  },\n  watch: {\n    $route: {\n      handler() {\n        let cur = {};\n        cur.path = this.$route.path;\n        cur.title = this.$route.meta.title;\n        this.$store.commit(\"tags/addtag\", cur);\n      }\n    }\n  },\n  computed: {\n    userfo() {\n      //当我刷新的时候返回的是一个observer对象\n      return JSON.parse(JSON.stringify(this.$store.getters.getUserInfo));\n    },\n    postfo() {\n      return JSON.parse(JSON.stringify(this.$store.getters.getPostInfo));\n    },\n    //小区名称\n    defaultCommunityName() {\n      if (this.postfo.community_list != undefined) {\n        return this.postfo.community_list[0].name;\n      } else {\n        return \"...\";\n      }\n    },\n    taglist() {\n      return this.$store.state.tags.taglist;\n    }\n  },\n  methods: {\n    watchFull() {\n      void [\"fullscreenchange\", \"webkitfullscreenchange\", \"mozfullscreenchange\".forEach(item => {\n        window.addEventListener(item, () => {\n          this.isFullScreen = this.checkFull();\n        });\n      })];\n    },\n    handleFullScreen() {\n      console.log(2);\n      this.isFullScreen ? this.screenfullOut() : this.screenfullEnter();\n    },\n    inittag() {\n      let cur = {};\n      cur.path = this.$route.path;\n      cur.title = this.$route.meta.title;\n      this.$store.commit(\"tags/initag\", cur);\n    },\n    closetag(item, index) {\n      //删除不tag不是当前的页面,那么就直接删除\n      if (item.path != this.$route.path) {\n        this.$store.commit(\"tags/deleteTag\", item);\n      } else {\n        if (this.taglist.length > 1) {\n          //删除的tag就是当前的页面\n          //如果是最后一个元素\n          if (index + 1 === this.taglist.length) {\n            //删除tag，并且把路由放到前面一个\n            this.$store.commit(\"tags/deleteTag\", item);\n            this.$router.push({\n              path: this.taglist[index - 1].path\n            });\n          } else {\n            //删除这个标签，应该往后挪动\n            this.$store.commit(\"tags/deleteTag\", item);\n            this.$router.push({\n              path: this.taglist[index].path\n            });\n          }\n        } else {\n          //如果是最后一个tag,提示不能删除了\n          this.notifyError(\"这是最后一个了，不能删除\");\n        }\n      }\n    },\n    togo(item) {\n      //点击header上的大板块，修改路由\n      if (this.$route.path != item.path) {\n        this.$router.push({\n          path: item.path\n        });\n      }\n    },\n    handleCommand(command) {\n      //退出登录\n      if (command === \"loginOut\") {\n        this.$confirm(\"您确定退出登录当前账户吗?个人设置将会保存\", \"退出登录确认\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(() => {\n          this.$store.commit(\"removeToken\");\n          //退出登录\n          this.$router.replace({\n            name: \"login\"\n          });\n        }).catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"取消退出登录\"\n          });\n        });\n      }\n      // 个人中心\n      if (command === \"gotocenter\") {\n        this.$router.push({\n          path: \"/user/zone\"\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["basicRouter","iotRouter","oaRouter","mixins","name","props","data","Lists","drawer","isFullScreen","mounted","inittag","watch","$route","handler","cur","path","title","meta","$store","commit","computed","userfo","JSON","parse","stringify","getters","getUserInfo","postfo","getPostInfo","defaultCommunityName","community_list","undefined","taglist","state","tags","methods","watchFull","forEach","item","window","addEventListener","checkFull","handleFullScreen","console","log","screenfullOut","screenfullEnter","closetag","index","length","$router","push","notifyError","togo","handleCommand","command","$confirm","confirmButtonText","cancelButtonText","type","then","replace","catch","$message","message"],"sources":["src/views/app/components/header.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"header\">\r\n      <div class=\"header-left\">\r\n        <span\r\n          class=\"header-list\"\r\n          v-for=\"item of Lists\"\r\n          :key=\"item.meta.title\"\r\n          @click=\"togo(item)\"\r\n          :class=\"{ fontcolor: item.path === '/' + $route.path.split('/')[1] }\"\r\n          >{{ item.meta.title }}</span\r\n        >\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <!-- 全屏按钮 -->\r\n        <span class=\"right-full\" @click=\"handleFullScreen\">\r\n          <i class=\"el-icon-full-screen\"></i>\r\n        </span>\r\n        <!-- 小区位置 -->\r\n        <span class=\"right-location\">\r\n          <i class=\"el-icon-location\"></i>\r\n          {{ defaultCommunityName }}小区\r\n        </span>\r\n        <!-- 个人信息 -->\r\n        <span class=\"right-mess\">\r\n          <el-dropdown placement=\"bottom-end\" @command=\"handleCommand\">\r\n            <span>{{ userfo.real_name }}</span>\r\n\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item command=\"gotocenter\">个人中心</el-dropdown-item>\r\n              <el-dropdown-item divided command=\"loginOut\"\r\n                >退出登录</el-dropdown-item\r\n              >\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </span>\r\n        <!-- 更多 -->\r\n        <span class=\"right-more\">\r\n          <i class=\"el-icon-more\" @click=\"drawer = true\"></i>\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"tags\">\r\n      <el-tag\r\n        v-for=\"(item, index) in taglist\"\r\n        :key=\"item.title\"\r\n        style=\"margin-right: 10px\"\r\n        closable\r\n        @close=\"closetag(item, index)\"\r\n        :type=\"item.path === $route.path ? 'success' : 'info'\"\r\n        @click=\"togo(item)\"\r\n        >{{ item.title }}</el-tag\r\n      >\r\n    </div>\r\n    <el-drawer\r\n      :visible.sync=\"drawer\"\r\n      direction=\"rtl\"\r\n      size=\"400px\"\r\n      class=\"drawer\"\r\n    >\r\n      <el-divider>主题风格设置</el-divider>\r\n      <div class=\"list1-div\">\r\n        <div :class=\"{ circle: $store.state.sliderbgc === 2 }\">\r\n          <img\r\n            src=\"@/assets/sider-theme-dark.svg\"\r\n            alt=\"\"\r\n            @click=\"$store.commit('convertbgc', 2)\"\r\n          />\r\n        </div>\r\n        <div :class=\"{ circle: $store.state.sliderbgc === 1 }\">\r\n          <img\r\n            src=\"@/assets/sider-theme-light.svg\"\r\n            alt=\"\"\r\n            @click=\"$store.commit('convertbgc', 1)\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"list2-div\">\r\n        <div :class=\"{ circle: $store.state.headbgc === 1 }\">\r\n          <img\r\n            src=\"@/assets/sider-theme-dark.svg\"\r\n            alt=\"\"\r\n            @click=\"$store.commit('convertheadbgc', 1)\"\r\n          />\r\n        </div>\r\n        <div :class=\"{ circle: $store.state.headbgc === 2 }\">\r\n          <img\r\n            src=\"@/assets/header-theme-dark.svg\"\r\n            alt=\"\"\r\n            @click=\"$store.commit('convertheadbgc', 2)\"\r\n          />\r\n        </div>\r\n        <div :class=\"{ circle: $store.state.headbgc === 3 }\">\r\n          <img\r\n            src=\"@/assets/header-theme-primary.svg\"\r\n            alt=\"\"\r\n            @click=\"$store.commit('convertheadbgc', 3)\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { basicRouter } from \"@/views/basic/basicRouter\";\r\nimport { iotRouter } from \"@/views/iot/iotRouter\";\r\nimport { oaRouter } from \"@/views/oa/oaRouter\";\r\nimport { mixins } from \"@/minxin\";\r\nexport default {\r\n  name: \"headeVue\",\r\n  mixins: [mixins],\r\n  props: [\"userInfo\", \"postInfo\"],\r\n  data() {\r\n    return {\r\n      Lists: [basicRouter, iotRouter, oaRouter],\r\n      drawer: false,\r\n      isFullScreen: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.inittag();\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler() {\r\n        let cur = {};\r\n        cur.path = this.$route.path;\r\n        cur.title = this.$route.meta.title;\r\n        this.$store.commit(\"tags/addtag\", cur);\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    userfo() {\r\n      //当我刷新的时候返回的是一个observer对象\r\n      return JSON.parse(JSON.stringify(this.$store.getters.getUserInfo));\r\n    },\r\n    postfo() {\r\n      return JSON.parse(JSON.stringify(this.$store.getters.getPostInfo));\r\n    },\r\n    //小区名称\r\n    defaultCommunityName() {\r\n      if (this.postfo.community_list != undefined) {\r\n        return this.postfo.community_list[0].name;\r\n      } else {\r\n        return \"...\";\r\n      }\r\n    },\r\n    taglist() {\r\n      return this.$store.state.tags.taglist;\r\n    },\r\n  },\r\n  methods: {\r\n    watchFull() {\r\n      void [\r\n        \"fullscreenchange\",\r\n        \"webkitfullscreenchange\",\r\n        \"mozfullscreenchange\".forEach((item) => {\r\n          window.addEventListener(item, () => {\r\n            this.isFullScreen = this.checkFull();\r\n          });\r\n        }),\r\n      ];\r\n    },\r\n    handleFullScreen() {\r\n      console.log(2);\r\n      this.isFullScreen ? this.screenfullOut() : this.screenfullEnter();\r\n    },\r\n    inittag() {\r\n      let cur = {};\r\n      cur.path = this.$route.path;\r\n      cur.title = this.$route.meta.title;\r\n      this.$store.commit(\"tags/initag\", cur);\r\n    },\r\n    closetag(item, index) {\r\n      //删除不tag不是当前的页面,那么就直接删除\r\n      if (item.path != this.$route.path) {\r\n        this.$store.commit(\"tags/deleteTag\", item);\r\n      } else {\r\n        if (this.taglist.length > 1) {\r\n          //删除的tag就是当前的页面\r\n          //如果是最后一个元素\r\n          if (index + 1 === this.taglist.length) {\r\n            //删除tag，并且把路由放到前面一个\r\n            this.$store.commit(\"tags/deleteTag\", item);\r\n            this.$router.push({ path: this.taglist[index - 1].path });\r\n          } else {\r\n            //删除这个标签，应该往后挪动\r\n            this.$store.commit(\"tags/deleteTag\", item);\r\n            this.$router.push({ path: this.taglist[index].path });\r\n          }\r\n        } else {\r\n          //如果是最后一个tag,提示不能删除了\r\n          this.notifyError(\"这是最后一个了，不能删除\");\r\n        }\r\n      }\r\n    },\r\n    togo(item) {\r\n      //点击header上的大板块，修改路由\r\n      if (this.$route.path != item.path) {\r\n        this.$router.push({ path: item.path });\r\n      }\r\n    },\r\n\r\n    handleCommand(command) {\r\n      //退出登录\r\n      if (command === \"loginOut\") {\r\n        this.$confirm(\r\n          \"您确定退出登录当前账户吗?个人设置将会保存\",\r\n          \"退出登录确认\",\r\n          {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          }\r\n        )\r\n          .then(() => {\r\n            this.$store.commit(\"removeToken\");\r\n            //退出登录\r\n            this.$router.replace({ name: \"login\" });\r\n          })\r\n          .catch(() => {\r\n            this.$message({\r\n              type: \"info\",\r\n              message: \"取消退出登录\",\r\n            });\r\n          });\r\n      }\r\n      // 个人中心\r\n      if (command === \"gotocenter\") {\r\n        this.$router.push({ path: \"/user/zone\" });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  .header-list {\r\n    display: inline-block;\r\n    margin-right: 20px;\r\n  }\r\n  .fontcolor {\r\n    color: rgb(40, 170, 170);\r\n  }\r\n  .header-right {\r\n    width: 300px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    height: 100%;\r\n  }\r\n  .list1-div,\r\n  .list2-div {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    padding-left: 20px;\r\n    div {\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n\r\n  .circle {\r\n    font-size: 15px;\r\n    position: relative;\r\n    top: 0px;\r\n    &::after {\r\n      content: \"\";\r\n      position: absolute;\r\n      width: 10px;\r\n      height: 10px;\r\n      top: 50px;\r\n      left: 25px;\r\n      border-radius: 5px;\r\n      background-color: rgb(19, 15, 223);\r\n    }\r\n  }\r\n}\r\n.tags {\r\n  height: 40px;\r\n  margin-top: 0px;\r\n  text-align: left;\r\n  line-height: 50px;\r\n  display: flex;\r\n}\r\n</style>\r\n<style>\r\n.el-drawer__header {\r\n  margin-bottom: 0px;\r\n  padding: 0px;\r\n}\r\n.el-divider__text {\r\n  font-size: 20px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}